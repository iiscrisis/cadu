(function($){$.fn.weacSlideshow=function(options){var settings=$.extend({slide_items:null,slide_html:null,slide_interval:1e4,slide_max_heigh:null,fullscreen:true,arrows_left:"images/arrows/arrow-left.svg",arrows_right:"images/arrows/arrow-right.svg",show_buttons:true,show_arrows:false},options);if(settings.slide_items){return this.each(function(){var $self=$(this);init_slideshow_actions($self);$(this).addClass("-weac-slideshow_container");var image_box_w=$(this).width();var image_box_h=$(this).height();var items_length=$(this).find(settings.slide_items).length;$(this).find(settings.slide_items).map(function(){$(this).hide();var $slideshow_item=$("<div/>");$slideshow_item.addClass("slideshow_item");$slideshow_item.addClass("side");if($(this).find("img").length>0){var $slide_bg=$("<div/>");$slide_bg.addClass("slide_bg");var $bg_image=$("<img/>");$bg_image.attr("src",$(this).find("img").eq(0).attr("src"));if(settings.fullscreen)resize_img($bg_image,image_box_w,image_box_h);$bg_image.appendTo($slide_bg);$slide_bg.prependTo($slideshow_item)}if($(this).find(settings.slide_html).length>0){var $slide_html=$("<div/>");$slide_html.addClass("slide_text_container");$(this).find(settings.slide_html).clone().appendTo($slide_html);$slide_html.appendTo($slideshow_item)}$slideshow_item.appendTo($self)});var slideshow_show="display:none";if(settings.show_buttons==true){slideshow_show="display:block"}var $slide_button;$slideshow_buttons_container=$("<div/>");$slideshow_buttons_container.addClass("slideshow_buttons_container");$slideshow_buttons=$("<div/>");$slideshow_buttons.addClass("slideshow_buttons");$slideshow_buttons.appendTo($slideshow_buttons_container);for(i=0;i<items_length;i++){$slide_button=$("<div/>");$slide_button.addClass("single_slideshow_button");$slide_button.addClass("circle");var $btn_interior=$("<div/>");$btn_interior.addClass("interior_slideshow_button");$btn_interior.addClass("circle");$slide_button.append($btn_interior);$slideshow_buttons.prepend($slide_button)}var $clearer=$("<div/>");$clearer.addClass("clearer");$slideshow_buttons.append($clearer);$slideshow_buttons_container.appendTo($(this));var new_w=($slide_button.width()+10)*items_length+20;$(this).find(".slideshow_buttons").width(new_w);if(settings.show_arrows==true){var $arrows=$("<div/>");$arrows.addClass("-weac-slideshow_arrows");var $arrows_container=$("<div/>");$arrows_container.addClass("-weac-slideshow_arrows_container");var $arrow_left=$("<div/>");$arrow_left.addClass("-weac-slideshow_arrows_arrow");$arrow_left.addClass("-weac-slideshow_arrow_left");var $arrow_img_l=$("<img/>");$arrow_img_l.attr("src",settings.arrows_left);var $arrow_right=$("<div/>");$arrow_right.addClass("-weac-slideshow_arrows_arrow");$arrow_right.addClass("-weac-slideshow_arrow_right");var $arrow_img_r=$("<img/>");$arrow_img_r.attr("src",settings.arrows_right);$arrow_img_r.appendTo($arrow_right);$arrow_img_l.appendTo($arrow_left);$arrow_left.appendTo($arrows_container);$arrow_right.appendTo($arrows_container);$arrows_container.appendTo($arrows);$arrows.prependTo($(this))}$(this).find(".slideshow_item").eq(0).addClass("show_slide_item");$(this).find(".slideshow_item").eq(0).addClass("show_slide_item_RL");$(this).find(".slideshow_item").eq(0).removeClass("hide_item_RL");$(this).find(".slideshow_item").eq(0).removeClass("side");$self.animate({opacity:1},1e3,function(){});$(this).find(".slideshow_buttons").find(".single_slideshow_button").eq(0).addClass("active");if($(this).find(".single_slideshow_button").length>1){settings.interval=setInterval(function(){var $next=$self.find(".active").next(".single_slideshow_button");if($next.length==0){$next=$self.find(".single_slideshow_button").first()}$next.trigger("click")},settings.slide_interval)}$(window).resize(function(){if(settings.fullscreen){$self.find(".slideshow_item").map(function(){var image_box_w=window.innerWidth;var image_box_h=window.innerHeight;resize_img_loaded($(this).find(".slide_bg").find("img"),image_box_w,image_box_h)})}})})}function resize_img($img,box_w,box_h){$img.load(function(){var natW=this.naturalWidth;var natH=this.naturalHeight;var w_x=box_w;var w_y=box_h;var p_x=0;var p_y=0;var ratio_x_y;if(p_y<w_y){ratio_x_y=w_x/w_y}else{ratio_x_y=w_x/p_y}var ratio_img_x_y=natH/natW;console.log(ratio_img_x_y);var new_x=box_w;var new_y=new_x*ratio_img_x_y;if(new_y<box_h){var new_h_ratio=box_h/new_y;new_y=new_y*new_h_ratio;new_x=new_x*new_h_ratio}var offset_x=(new_x-box_w)/2;if(offset_x<0){offset_x=0}else{offset_x=offset_x*-1}var offset_y=(new_y-box_h)/2;if(offset_y<0){offset_y=0}else{offset_y=offset_y*-1}$img.css("width",new_x);$img.css("height",new_y);$img.css("position","relative");$img.css("left",offset_x);$img.css("top",offset_y)})}function resize_img_loaded($img,box_w,box_h){console.log($img.attr("src"));var natW=$img.width();var natH=$img.height();var w_x=box_w;var w_y=box_h;var p_x=0;var p_y=0;var ratio_x_y;if(p_y<w_y){ratio_x_y=w_x/w_y}else{ratio_x_y=w_x/p_y}var ratio_img_x_y=natH/natW;console.log(ratio_img_x_y);var new_x=box_w;var new_y=new_x*ratio_img_x_y;if(new_y<box_h){var new_h_ratio=box_h/new_y;new_y=new_y*new_h_ratio;new_x=new_x*new_h_ratio}var offset_x=(new_x-box_w)/2;if(offset_x<0){offset_x=0}else{offset_x=offset_x*-1}var offset_y=(new_y-box_h)/2;if(offset_y<0){offset_y=0}else{offset_y=offset_y*-1}$img.css("width",new_x);$img.css("height",new_y);$img.css("position","relative");$img.css("left",offset_x);$img.css("top",offset_y)}function resize_slideshow_images($self){console.log("resizing inside "+$self.attr("id"));if(settings.fullscreen){$(settings.slide_items).map(function(){var image_box_w=$self.width();var image_box_h=$self.height();resize_img($(this).find(".slide_bg").find("img"),image_box_w,image_box_h)})}}function init_slideshow_actions($slide_container){$slide_container.on("click",".single_slideshow_button",function(event){var $container=$(this).closest(".-weac-slideshow_container");var current_active_index=$(this).closest(".slideshow_buttons_container").find(".active").index();var get_index=$(this).index();var slide_length=$(this).closest(".slideshow_buttons").find(".single_slideshow_button").length;var class_hide="hide_item";var class_show="show_slide_item";if(current_active_index==slide_length-1&&get_index==0){direction="_RL"}else if(current_active_index==0&&get_index==slide_length-1){direction="_LR"}else if(current_active_index<get_index){direction="_RL"}else{direction="_LR"}$(this).closest(".slideshow_buttons_container").find(".single_slideshow_button").removeClass("active");$(this).addClass("active");$container.find(".show_slide_item").addClass("hide_item"+direction);$container.find(".show_slide_item").removeClass("show_slide_item_LR");$container.find(".show_slide_item").removeClass("show_slide_item_RL");$container.find(".show_slide_item").removeClass("show_slide_item");$container.find(".slideshow_item ").eq(get_index).addClass("show_slide_item");$container.find(".slideshow_item ").eq(get_index).addClass("show_slide_item"+direction);$container.find(".slideshow_item ").eq(get_index).removeClass("hide_item_RL");$container.find(".slideshow_item ").eq(get_index).removeClass("hide_item_LR")});$slide_container.on("click",".-weac-slideshow_arrows_arrow",function(event){var $container=$(this).closest(".-weac-slideshow_container");if($(this).hasClass("-weac-slideshow_arrow_right")){var $next=$container.find(".active").next(".single_slideshow_button");if($next.length==0){$next=$container.find(".single_slideshow_button").first()}$next.trigger("click")}if($(this).hasClass("-weac-slideshow_arrow_left")){var $prev=$container.find(".active").prev(".single_slideshow_button");if($prev.length==0){$prev=$container.find(".single_slideshow_button").last()}$prev.trigger("click")}})}}})(jQuery);